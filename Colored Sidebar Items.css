/*
 * Based on "Obsidian Colored Sidebar Items" by CyanVoxel
 * Original Source: https://github.com/CyanVoxel/Obsidian-Colored-Sidebar
 * License: MIT License (https://opensource.org/licenses/MIT)
 *
 * Refactored by Yoshinori-Imada
 */

:root {
  /* ================================ Colors ================================ */
  --red: #e22c3c;                /* Default Prefix: None */
  --red-orange: #e9404b;         /* Default Prefix: None */
  --hot-red: #e3365e;            /* Default Prefix: None */
  --dark-blue: #2c4678;          /* Default Prefix: None */
  --cool-brown: #723520;         /* Default Prefix: None */
  --soft-blue: #aec6ff;          /* Default Prefix: 00 */
  --pale-pink: #ffd8ee;          /* Default Prefix: 01 */
  --purple: #c952ed;             /* Default Prefix: 02 */
  --mint: #52eea3;               /* Default Prefix: 03 */
  --violet: #9446f8;             /* Default Prefix: 04 */
  --orange: #ee6748;             /* Default Prefix: 05 */
  --blue: #437cf3;               /* Default Prefix: 06 */
  --amber: #fa9f50;              /* Default Prefix: 07 */
  --pale-cyan: #c0e8ff;          /* Default Prefix: 08 */
  --yellow: #e3c46d;             /* Default Prefix: 09 */
  --light-blue: #54b6f8;         /* Default Prefix: 10 */
  --lime: #86d6bf;               /* Default Prefix: 11 */
  --rose-pink: #ffb2be;          /* Default Prefix: 12 */
  --cool-gray: #515768;          /* Default Prefix: 99 */
  --nav-folder-bg-mix-color: #161d1d;

  --default-text-color: #9cf0f7;
  --highlight: #b5d086;
  --shadow: #0b0c2c;

  --nav-item-weight-hover: bold;
  --background-color: color-mix(in srgb, var(--folder-color) 80%, transparent);
}

/* Light Theme Specific Properties */
.theme-light {
  --contrast-color: var(--shadow);
  --default-text-color: var(--shadow);
  --bg-contrast-amount: 70%;
  --fg-contrast-amount: 30%;
  --medium-contrast-amount: 60%;
  --active-contrast-amount: 30%;

  /* Darker Versions of Bright Colors for Light Theme */
  --yellow: color-mix(in srgb, #ffd85e 90%, var(--shadow));
  --lime: color-mix(in srgb, #97e768 90%, var(--shadow));
  --mint: color-mix(in srgb, #52eea3 85%, var(--shadow));
  --soft-blue: color-mix(in srgb, #51e1e9 85%, var(--shadow));
  --pale-cyan: color-mix(in srgb, #43cfea 85%, var(--shadow));
  --light-blue: color-mix(in srgb, #54b6f8 90%, var(--shadow));
}

/* Dark Theme Specific Properties */
.theme-dark {
  --contrast-color: var(--highlight);
  --bg-contrast-amount: 15%;
  --fg-contrast-amount: 40%;
  --medium-contrast-amount: 20%;
  --active-contrast-amount: 10%;
}

/* All Folder Titles */
.nav-folder-title {
  font-weight: bold;
  border-radius: 5px;
}

/* Narrower Padding on Desktop*/
@media only screen and (min-width: 768px) {
  .nav-file-title,
  .nav-folder-title {
    /* padding: 3px 5px 2px 4px !important; */
    padding-top: 3px !important;
    padding-right: 5px !important;
    padding-bottom: 2px !important;
    padding-left: 15px;
  }
}

/* ============================ Folder Title Prefixes / フォルダのプレフィックス =============================
This section defines styles for folders based on their numbered prefixes.
このセクションでは、番号付きプレフィックスに基づいてフォルダのスタイルを定義します。

The process is split into two parts:
処理は2つのパートに分かれています。

1.  **Prefix Color Definitions**: This part assigns a specific color from the :root
    palette to a custom variable called `--folder-color` for each prefix.
    For example, folders starting with "00" get the color of `--soft-blue`.
    To add or change a folder's color, you only need to edit this section.

    **プレフィックスの色の定義**: このパートでは、:rootパレットから特定の色を、
    プレフィックスごとに`--folder-color`というカスタム変数に割り当てます。
    例えば、「00」で始まるフォルダは`--soft-blue`の色になります。
    フォルダの色を追加・変更したい場合は、このセクションを編集するだけで済みます。

2.  **Generic Prefix Styles**: This part applies the actual styles (text color,
    hover effects, etc.) to all listed prefixes. It uses the `--folder-color`
    variable, so the styles are consistent across all colored folders.
    When adding a new prefix, you must also add it to the selector lists in this
    section.

    **共通のプレフィックススタイル**: このパートでは、リストアップされた全てのプレフィックスに
    実際のスタイル（文字色、ホバーエフェクトなど）を適用します。
    `--folder-color`変数を使用するため、色付けされた全てのフォルダでスタイルは一貫します。
    新しいプレフィックスを追加する際は、このセクションのセレクタリストにも追加する必要があります。
*/

/* ------------------------- Prefix Color Definitions ------------------------- */
/* A --folder-color variable is set on the folder, which is then inherited by its children */
.nav-folder:has(.nav-folder-title[data-path^="00"]) { --folder-color: var(--soft-blue); }
.nav-folder:has(.nav-folder-title[data-path^="01"]) { --folder-color: var(--pale-pink); }
.nav-folder:has(.nav-folder-title[data-path^="02"]) { --folder-color: var(--purple); }
.nav-folder:has(.nav-folder-title[data-path^="03"]) { --folder-color: var(--mint); }
.nav-folder:has(.nav-folder-title[data-path^="04"]) { --folder-color: var(--violet); }
.nav-folder:has(.nav-folder-title[data-path^="05"]) { --folder-color: var(--orange); }
.nav-folder:has(.nav-folder-title[data-path^="06"]) { --folder-color: var(--blue); }
.nav-folder:has(.nav-folder-title[data-path^="07"]) { --folder-color: var(--amber); }
.nav-folder:has(.nav-folder-title[data-path^="08"]) { --folder-color: var(--pale-cyan); }
.nav-folder:has(.nav-folder-title[data-path^="09"]) { --folder-color: var(--yellow); }
.nav-folder:has(.nav-folder-title[data-path^="10"]) { --folder-color: var(--light-blue); }
.nav-folder:has(.nav-folder-title[data-path^="11"]) { --folder-color: var(--lime); }
.nav-folder:has(.nav-folder-title[data-path^="12"]) { --folder-color: var(--rose-pink); }
.nav-folder:has(.nav-folder-title[data-path^="99"]) { --folder-color: var(--cool-gray); }

/* --------------------------- Generic Prefix Styles -------------------------- */
.nav-folder-title[data-path^="00"],
.nav-folder-title[data-path^="01"],
.nav-folder-title[data-path^="02"],
.nav-folder-title[data-path^="03"],
.nav-folder-title[data-path^="04"],
.nav-folder-title[data-path^="05"],
.nav-folder-title[data-path^="06"],
.nav-folder-title[data-path^="07"],
.nav-folder-title[data-path^="08"],
.nav-folder-title[data-path^="09"],
.nav-folder-title[data-path^="10"],
.nav-folder-title[data-path^="11"],
.nav-folder-title[data-path^="12"],
.nav-folder-title[data-path^="99"] {
  background-color: var(--background-color);
  color: var(--folder-color);
  --nav-item-color-hover: color-mix(
    in srgb,
    var(--folder-color) var(--fg-contrast-amount),
    var(--contrast-color)
  );
  --nav-item-background-hover: color-mix(
    in srgb,
    var(--folder-color) var(--bg-contrast-amount),
    transparent
  );
  --background-modifier-border-focus: color-mix(
    in srgb,
    var(--folder-color) 40%,
    transparent
  );
  --nav-collapse-icon-color: color-mix(in srgb, var(--folder-color) 60%, transparent);
  --background-color: color-mix(in srgb, var(--folder-color) 15%, var(--nav-folder-bg-mix-color));

}

.nav-folder-title[data-path^="00"]:hover,
.nav-folder-title[data-path^="01"]:hover,
.nav-folder-title[data-path^="02"]:hover,
.nav-folder-title[data-path^="03"]:hover,
.nav-folder-title[data-path^="04"]:hover,
.nav-folder-title[data-path^="05"]:hover,
.nav-folder-title[data-path^="06"]:hover,
.nav-folder-title[data-path^="07"]:hover,
.nav-folder-title[data-path^="08"]:hover,
.nav-folder-title[data-path^="09"]:hover,
.nav-folder-title[data-path^="10"]:hover,
.nav-folder-title[data-parh^="11"]:hover,
.nav-folder-title[data-parh^="12"]:hover,
.nav-folder-title[data-path^="99"]:hover {
  --nav-collapse-icon-color: color-mix(
    in srgb,
    var(--folder-color) 60%,
    var(--contrast-color)
  );
}

.tree-item-children .nav-folder:where(
  :has(.nav-folder-title[data-path^="00"]),
  :has(.nav-folder-title[data-path^="01"]),
  :has(.nav-folder-title[data-path^="02"]),
  :has(.nav-folder-title[data-path^="03"]),
  :has(.nav-folder-title[data-path^="04"]),
  :has(.nav-folder-title[data-path^="05"]),
  :has(.nav-folder-title[data-path^="06"]),
  :has(.nav-folder-title[data-path^="07"]),
  :has(.nav-folder-title[data-path^="08"]),
  :has(.nav-folder-title[data-path^="09"]),
  :has(.nav-folder-title[data-path^="10"]),
  :has(.nav-folder-title[data-path^="11"]),
  :has(.nav-folder-title[data-path^="12"]),
  :has(.nav-folder-title[data-path^="99"]))
{
  --nav-indentation-guide-color: color-mix(
    in srgb,
    var(--folder-color) var(--medium-contrast-amount),
    transparent
  );
}

.tree-item-children .nav-folder:where(
  :has(.nav-folder-title[data-path^="00"]),
  :has(.nav-folder-title[data-path^="01"]),
  :has(.nav-folder-title[data-path^="02"]),
  :has(.nav-folder-title[data-path^="03"]),
  :has(.nav-folder-title[data-path^="04"]),
  :has(.nav-folder-title[data-path^="05"]),
  :has(.nav-folder-title[data-path^="06"]),
  :has(.nav-folder-title[data-path^="07"]),
  :has(.nav-folder-title[data-path^="08"]),
  :has(.nav-folder-title[data-path^="09"]),
  :has(.nav-folder-title[data-path^="10"]),
  :has(.nav-folder-title[data-path^="11"]),
  :has(.nav-folder-title[data-path^="12"]),
  :has(.nav-folder-title[data-path^="99"])),
.nav-file-title {
  color: color-mix(
    in srgb,
    var(--folder-color) var(--medium-contrast-amount),
    var(--default-text-color)
  );
  --nav-item-background-hover: color-mix(
    in srgb,
    color-mix(in srgb, var(--folder-color) 50%, var(--highlight))
      var(--bg-contrast-amount),
    transparent
  );
  --background-modifier-border-focus: color-mix(
    in srgb,
    var(--folder-color) 40%,
    transparent
  );
  --nav-item-background-active: color-mix(
    in srgb,
    var(--folder-color) var(--active-contrast-amount),
    transparent
  );
}
